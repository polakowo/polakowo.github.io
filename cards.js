cards = [{
    "img_url": "img/idt.svg",
    "title": "Research platform for analyzing digital transformation projects",
    "description": `
    <p>
        The primary goal of this project was to study the current and ongoing digital transformation of organizations.
        First, we identified crucial success and failure factors of digital transformation initiatives.
        We used data mining to determine their empirical significance and uncover hidden relationships.
        Second, we conducted a comprehensive network analysis designed to examine corporate collaboration on digital transformation activities.
        We also created a software package in Python to decrease the barriers to performing the same analysis steps in the future.
        Finally, we designed and implemented an extensible software prototype capable of collecting, analyzing and organizing information on digital transformation projects.
    </p>
    <p>
        The prototype was made specifically for the <a href="https://www.i17.in.tum.de/home/">Chair of Information Systems</a> at the Technical University in Munich.
    </p>
    `,
    "background": "repeating-radial-gradient(circle, #26687F, #26687F 10px, #286D84 10px, #286D84 20px)",
    "tags": ['University', 'Prototype', 'Digital Transformation', 'Success Factors', 'Holistic Analysis', 'Value Network', 'Platform', 'Python', 'sklearn', 'NetworkX', 'NodeJS', 'JavaScript'],
    "pictures": [
        "img/pictures/idt1.png",
        "img/pictures/idt2.png",
        "img/pictures/idt3.png",
        "img/pictures/idt4.png",
        "img/pictures/idt5.png"
    ],
    "videos": [],
    "url": "",
    "section": "Master's Capstone"
}, {
    "img_url": "img/saphana.png",
    "title": "Native SAP HANA application for detecting fraud activity in ERP data",
    "description": `
    <p>
        The objective of this work was investigation of occupational fraud activity in P2P business data and implementation of a prototype
        for its detection - a comprehensive tool dedicated for fraud investigators and forensic accountants.
        We applied a red-flag based approach to detect fraudulent patterns once fraud prevention has failed.
        The prototype leverages the power of SAP HANA to process large volumes of ERP data blazingly fast.
        In addition to processing capabilities, the tool offers a web interface with a rich, customizable UI.
    </p>
    <p>
        The prototype was made in collaboration with <a href="https://www.i17.in.tum.de/en/research/projects/current-projects/sap-university-competence-center-ucc/">SAP UCC</a>.
    </p>
    `,
    "background": "repeating-linear-gradient(to bottom, #3168AB, #3168AB 10px, #336EB3 10px, #336EB3 20px)",
    "tags": ['University', 'Prototype', 'Fraud Detection', 'Red Flags', 'P2P Process', 'In-Memory Database', 'SAP HANA', 'SAP ERP', 'SQLScript', 'XSJS', 'SAPUI5', 'JavaScript'],
    "pictures": [
        "img/pictures/hana1.png",
        "img/pictures/hana2.png",
        "img/pictures/hana3.png",
    ],
    "videos": [],
    "url": "",
    "section": "Bachelor's Capstone"
}, {
    "img_url": "img/zeissimt.png",
    "title": "Mobile application for connecting Zeiss with its customers",
    "description": `
    <p>
        Zeiss IMT is an iOS application prototype which aims to facilitate the communication and interaction between Zeiss Metrology centers and their potential customers.
        The project life cycle was managed with Agile techniques (Scrum) and backed by communicating continuously to clients.
        The process included object-oriented modeling and system design as well as the realization of graphical UIs, usability testing, continuous integration and delivery.
        The responsibilities of mine also included server-side development and release management.
    </p>
    `,
    "background": "white",
    "tags": ['iOS App', 'Scrum', 'Prototype', 'Swift', 'Backend', 'NodeJS', 'JavaScript'],
    "pictures": [],
    "videos": [{
        "video": "https://www.youtube.com/embed/8wqAjsUedyg",
        "img": "img/pictures/zeiss.png"
    }],
    "url": "",
    "section": "Corporate Project"
}, {
    "img_url": "img/oscarobber.png",
    "title": "Network and sentiment analysis applied on the IMDB database",
    "description": `
    <p>
        The <a href="https://www.imdb.com/interfaces/">IMDb Dataset</a> represents one of the largest internet sources for movies/actors data. 
        We used the data to study the collaboration network of co-star actors.
        In particular, we assembled an evolving social network by linking actors and science fiction movies together throughout history.
        After, we proceeded to calculate topological and non-topological metrics from this network, for example, whether actors tend to play in similar movies.
        Finally, we applied NLP to study correlation between plots and ratings, extract important keywords, and perform sentiment analysis on user reviews.
    </p>
    `,
    "background": "#0B1A2D",
    "tags": ['Movies', 'Actors', 'Network Analysis', 'NLP', 'User Reviews', 'Python', 'sklearn', 'NetworkX', 'NLTK'],
    "pictures": [],
    "videos": [],
    "url": "https://polakowo.github.io/oscarobber/",
    "section": "Capstone Project"
}, {
    "img_url": "img/gtd-analysis.png",
    "title": "Analysis of the most comprehensive open-source database on terrorist events",
    "description": `
    <p>
        The scope of this project was to (1) identify and highlight geographical and temporal patterns of terrorism,
        (2) discover main determinants of successful terrorist attacks and their prevention,
        and (3) provide visualization tools for the user to explore the data interactively.
        After carefully choosing data preprocessing steps and building an efficient front-end logic, we were able to serve a lot of diverse data and display rich animations, without sacrificing responsiveness.
    </p>
    `,
    "background": "repeating-linear-gradient(-45deg, #FDE457, #FDE457 20px, #FDDE4C 20px, #FDDE4C 40px)",
    "tags": ['Terrorism', 'Data Analysis', 'Visualization', 'Python', 'sklearn', 'JavaScript', 'D3.js'],
    "pictures": [],
    "videos": [],
    "url": "https://polakowo.github.io/gtd-analysis/project/",
    "section": "Capstone Project"
}, {
    "img_url": "img/datadocs.svg",
    "title": "Collaborative documentation platform for and from data scientists",
    "description": `
    <p>
        The information on data science and machine learning grows every hour, with both theory and best practices being distributed over many websites, online books, and lengthy Medium articles.
        To overcome hurdles of constant Googling and to keep an overview, we created an open-source documentation platform which organizes knowledge in a most efficient and intuitive manner - bullet points.
        The platform is based on <a href="https://github.com/facebook/Docusaurus">Facebook's Docusaurus</a> and allows for search, collaboration and knowledge sharing.
    </p>
    `,
    "background": "white",
    "tags": ['Documentation', 'Platform', 'Collaboration', 'Data Science', 'Docusaurus', 'React'],
    "pictures": [],
    "videos": [],
    "url": "https://polakowo.github.io/datadocs/",
    "section": "Open Source Project"
}, {
    "img_url": "img/cryptoz.svg",
    "title": "Package with visualization tools for tracking the cryptocurrency market",
    "description": `
    <p>
        You might have encountered situations where Bitcoin was outpacing alts after a market-wide correction or where Bitcoin stagnated and alts suddenly boomed.
        The cryptocurrency market is a complex, dynamic ecosystem, where correlations appear and disappear with time.
        Most of the standard tools out there lack the ability to visualize these relationships clearly, while observing each coin in isolation brings little value. 
        That's why we created an open-source Python package with tools such as time-based heatmaps.
        For example, you can easily compare Bollinger Bands of dozens of coins without having to build ugly line charts.
        
    </p>
    `,
    "background": "#FBD249",
    "tags": ['Cryptocurrency', 'Trading', 'Market', 'Visualization', 'Python'],
    "pictures": [],
    "videos": [],
    "url": "https://github.com/polakowo/cryptoz",
    "section": "Open Source Project"
}, {
    "img_url": "img/vector-bt.svg",
    "title": "Package for backtesting and trade optimization",
    "description": `
    <p>
        Ever wondered how a simple EMA strategy compares to the purely random one? 
        Which strategy is more conservative? 
        Are your odds of being successful better than a chance?
        Are technical indicators useful? 
        This Python package is a costless alternative to expensive professional financial consulting.
        The software was implemented in pure NumPy and is blazingly fast thanks to full vectorization and multiprocessing.
    </p>
    `,
    "background": "#B7E5FC",
    "tags": ['Cryptocurrency', 'Trading', 'Backtesting', 'Optimization', 'Python', 'NumPy'],
    "pictures": [],
    "videos": [],
    "url": "https://github.com/polakowo/vector-bt",
    "section": "Open Source Project"
}, {
    "img_url": "img/amazon-reviews-sentiment-analysis.png",
    "title": "Sentiment analysis of Amazon product reviews",
    "description": `
    <p>
        Transfer learning is an exciting concept but a difficult one to apply in NLP tasks.
        Here we fine-tuned <a href="http://nlp.fast.ai/classification/2018/05/15/introducting-ulmfit.html">an AWD-LSTM model</a> for sentiment analysis on Amazon product reviews and achieved 95.8% accuracy of predictions whether the review was positive or not.
    </p>
    `,
    "background": "#232F3D",
    "tags": ['Transfer Learning', 'Product Reviews', 'Sentiment Analysis', 'NLP', 'Neural Networks', 'Python', 'fastai'],
    "pictures": [],
    "videos": [],
    "url": "https://github.com/polakowo/mlprojects/tree/master/amazon-reviews-sentiment-analysis",
    "section": "Personal Project"
}, {
    "img_url": "img/1c-sales-prediction.png",
    "title": "Forecasting total sales for every product and store in the next month",
    "description": `
    <p>
        Sales forecasting plays a major role in a company's success.
        The goal of this project was to predict total sales for every product and store in the next month.
        This challenging time-series problem was tackled by using GBMs, linear models, neural networks, and ensembles. 
        The project was part of the <a href="https://www.kaggle.com/c/competitive-data-science-predict-future-sales">Predict Future Sales competition</a>.
    </p>
    `,
    "background": "white",
    "tags": ['Competition', 'Sales Forecasting', 'Time Series', 'Neural Networks', 'Python', 'LGBM', 'CatBoost', 'Vowpal Wabbit', 'sklearn', 'fastai', 'Ensembling'],
    "pictures": [],
    "videos": [],
    "url": "https://github.com/polakowo/mlprojects/tree/master/1c-sales-prediction",
    "section": "Personal Project"
}, {
    "img_url": "img/rossmann-sales-prediction.png",
    "title": "Forecasting daily Rossmann sales for up to six weeks in advance",
    "description": `
    <p>
        The <a href="https://www.kaggle.com/c/rossmann-store-sales">Rossmann Store Sales competition</a> was another time-series competition where one had to predict future Rossmann sales. 
        Our solution steps included data exploration, data preparation, and modeling with neural networks.
        We additionaly explored embeddings, which gave us some interesting insights:
        for example, the embeddings of cities learned by the model and visualized on a 2D plot exactly resembled the map of Germany.
    </p>
    `,
    "background": "white",
    "tags": ['Competition', 'Sales Forecasting', 'Time Series', 'Neural Networks', 'Embeddings', 'Python', 'fastai'],
    "pictures": [],
    "videos": [],
    "url": "https://github.com/polakowo/mlprojects/tree/master/rossmann-sales-prediction",
    "section": "Personal Project"
}, {
    "img_url": "img/credit-card-fraud-detection.png",
    "title": "Detecting fraudulent credit card transactions with anomaly detection",
    "description": `
    <p>
        The <a href="https://www.kaggle.com/mlg-ulb/creditcardfraud">Credit Card Fraud Detection competition</a> was a perfect match for learning about state-of-the-art anomaly detection methods.
        In this project, we trained an autoencoder to detect fraudulent credit card transactions and compared its performance to other methods.
    </p>
    `,
    "background": "white",
    "tags": ['Competition', 'Fraud', 'Transactions', 'Anomaly Detection', 'Autoencoders', 'Neural Networks', 'Python', 'sklearn', 'PyTorch', 'fastai'],
    "pictures": [],
    "videos": [],
    "url": "https://github.com/polakowo/mlprojects/tree/master/credit-card-fraud-detection",
    "section": "Personal Project"
}, {
    "img_url": "img/movielens-recommendation.jpg",
    "title": "Movie recommendation system using collaborative filtering",
    "description": `
    <p>
        This project aimed to build a movie recommendation mechanism on top of the <a href="https://grouplens.org/datasets/movielens/">MovieLens dataset</a>.
        The main focus was on collaborative filtering using (item and user) embeddings as a way for the model to learn latent factors.
    </p>
    `,
    "background": "#EF6937",
    "tags": ['Movies', 'Recommender System', 'Collaborative Filtering', 'User Preferences', 'Embeddings', 'Neural Networks', 'Python', 'fastai'],
    "pictures": [],
    "videos": [],
    "url": "https://github.com/polakowo/mlprojects/tree/master/movielens-recommendation",
    "section": "Personal Project"
}, {
    "img_url": "img/airbus-ship-segmentation.jpg",
    "title": "Detection and segmentation of ships in satellite images",
    "description": `
    <p>
        The challenge of the <a href="https://www.kaggle.com/c/airbus-ship-detection">Airbus Ship Detection Challenge competition</a> was in building a model that detects all ships in satellite images as quickly as possible.
        For this, we choose a Dynamic Unet with (a pre-trained) ResNet34 backbone and applied a set of hacks.
        After training the model over a night, we achieved some remarkable performance (top 50 as of today).
        In addition, we made a tiny web application for demonstration purposes.
    </p>
    `,
    "background": "#223C75",
    "tags": ['Competition', 'Satellite Imagery', 'Ship Detection', 'Image Segmentation', 'Neural Networks', 'Transfer Learning', 'Python', 'fastai', 'Web App', 'Starlette'],
    "pictures": [],
    "videos": [],
    "url": "https://github.com/polakowo/mlprojects/tree/master/airbus-ship-segmentation",
    "section": "Personal Project"
}, {
    "img_url": "img/planet-amazon-classification.svg",
    "title": "Classification of satellite images for different atmospheric conditions and land cover and use",
    "description": `
    <p>
        Similar to the Airbus competition, the <a href="https://www.kaggle.com/c/planet-understanding-the-amazon-from-space">Planet: Understanding the Amazon from Space challenge</a> was about processing satellite images. 
        Here, the image chips with various atmospheric conditions and classes of land cover/land use had to be tagged (i.e. a multi-label classification task).
        We trained a simple, fine-tuned ResNet50 to achieve good performance.
    </p>
    `,
    "background": "#223C75",
    "tags": ['Competition', 'Satellite Imagery', 'Image Classification', 'Tagging', 'Neural Networks', 'Transfer Learning', 'Python', 'fastai', 'Web App', 'Starlette'],
    "pictures": [],
    "videos": [],
    "url": "https://github.com/polakowo/mlprojects/tree/master/planet-amazon-classification",
    "section": "Personal Project"
}]

const generate_card = (item, i) => $(`
    <div class="col-xs-12 col-sm-6 col-lg-4">
        <div class="card mb-4 box-shadow project" data-id="${i}">
            <table style="height: 225px; width: 100%;">
                <tbody>
                    <tr>
                        <td class="align-middle text-center" style="background: ${item.background};">
                            <img class="card-img-top" src="${item.img_url}">
                        </td>
                    </tr>
                </tbody>
            </table>
            <div class="card-body">
                <p class="card-text">${item.title}</p>
                <div class="d-flex justify-content-between align-items-center">
                    <small class="text-muted">${item.section}</small>
                </div>
            </div>
        </div>
    </div>
`)
const generate_details = (item, i) => $(`
    <div class="row">
        <div class="col-xs-12 col-lg-8 offset-lg-2">
            <div class="collapse" data-id="${i}">
                <div class="card card-body mb-5">
                    <div class="card-text">
                        <small>Description</small>
                        ${item.description}
                    </div>
                    ${item.tags.length > 0 ? `
                        <small>Tags</small>
                        <p class="card-text">${item.tags.map(tag => `<span class="badge badge-pill badge-light">${tag}</span>`).join(' ')}</p>` 
                    : ''}
                    ${item.pictures.length > 0 ? `
                        <small>Images</small>
                        <div class="container">
                            <div class="row">
                                ${item.pictures.map(path => (`
                                    <div class="col-xs-6 col-sm-4 col-lg-3 mt-2">
                                        <a href="${path}" data-toggle="lightbox" data-gallery="gallery">
                                            <img src="${path}" class="img-fluid img-thumbnail">
                                        </a>
                                    </div>`
                                )).join('')}
                            </div>
                        </div>` 
                    : ``}
                    ${item.videos.length > 0 ? `
                        <small>Videos</small>
                        <div class="container">
                            <div class="row">
                                ${item.videos.map(path => (`
                                    <div class="col-xs-6 col-sm-4 col-lg-3 mt-2">
                                        <a href="${path.video}" data-toggle="lightbox" data-gallery="gallery">
                                            <img src="${path.img}" class="img-fluid img-thumbnail">
                                        </a>
                                    </div>`
                                )).join('')}
                            </div>
                        </div>` 
                    : ``}
                    <div class="d-flex justify-content-between align-items-center">
                        <div class="btn-group">
                            ${item.url ? `<a href="${item.url}"target="_blank" role="button" 
                            class="btn btn-sm btn-outline-secondary">View</a>` : ``}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
`)

function collapse() {
    const id = $(this).data('id')
    const $details = $(`.collapse[data-id="${id}"]`)
    const shown = $details.hasClass('show')

    if ($('.collapse.show').length) {
        $('.collapse.show').on('hidden.bs.collapse', function () {
            $('.collapse').off('hidden.bs.collapse')
            if (!shown) {
                $details.collapse('show')
                $(`.project[data-id!="${id}"]`).css('opacity', 0.3)
            }
        })
        $('.collapse.show').collapse('hide')
        $('.project').css('opacity', 1.0)
    } else {
        $details.collapse('show')
        $(`.project[data-id!="${id}"]`).css('opacity', 0.3)
    }
}

function getBootstrapDeviceSize() {
    return $('#users-device-size').find('div:visible').last().data('id');
}

$(document).ready(function () {
    size = getBootstrapDeviceSize()
    console.log(size)
    everyth = null
    switch (size) {
        case 'xs':
            everyth = 1
            break
        case 'sm':
        case 'md':
            everyth = 2
            break
        case 'lg':
        case 'xl':
            everyth = 3
            break
    }
    let $currentRow = null;
    cards.forEach((item, i) => {
        if (i % everyth == 0) {
            const $container = $(`#projects-container`)
            $currentRow = $('<div class="row"></div>')
            $container.append($currentRow)
        }
        $currentRow.append(generate_card(item, i))
        $currentRow.parent().append(generate_details(item, i))
        $(`.project[data-id="${i}"]`).on("click", collapse);
    })
})

$(document).on('click', '[data-toggle="lightbox"]', function (event) {
    event.preventDefault();
    $(this).ekkoLightbox({
        alwaysShowClose: true,
        showArrows: false
    });
});
